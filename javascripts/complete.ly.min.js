function completely(e,t){function o(e){return void 0===y&&(y=document.createElement("span"),y.style.visibility="hidden",y.style.position="fixed",y.style.outline="0",y.style.margin="0",y.style.padding="0",y.style.border="0",y.style.left="0",y.style.whiteSpace="pre",y.style.fontSize=t.fontSize,y.style.fontFamily=t.fontFamily,y.style.fontWeight="normal",document.body.appendChild(y)),y.innerHTML=String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),y.getBoundingClientRect().right}t=t||{},t.fontSize=t.fontSize||"16px",t.fontFamily=t.fontFamily||"sans-serif",t.promptInnerHTML=t.promptInnerHTML||"",t.color=t.color||"#333",t.hintColor=t.hintColor||"#aaa",t.backgroundColor=t.backgroundColor||"#fff",t.dropDownBorderColor=t.dropDownBorderColor||"#aaa",t.dropDownZIndex=t.dropDownZIndex||"100",t.dropDownOnHoverBackgroundColor=t.dropDownOnHoverBackgroundColor||"#ddd",t.placeholder=t.placeholder||"Placeholder",t.matcher=t.matcher||function(e,t){return new RegExp("^"+e,"i").test(t)};var n=document.createElement("input");n.type="text",n.spellcheck=!1,n.style.fontSize=t.fontSize,n.style.fontFamily=t.fontFamily,n.style.color=t.color,n.style.backgroundColor=t.backgroundColor,n.style.width="100%",n.style.outline="0",n.style.border="0",n.style.margin="0",n.style.padding="0";var l=n.cloneNode();l.disabled="",l.value=t.placeholder,l.realValue="",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.borderColor="transparent",l.style.boxShadow="none",l.style.color=t.hintColor,n.style.backgroundColor="transparent",n.style.verticalAlign="top",n.style.position="relative";var r=document.createElement("div");r.style.position="relative",r.style.outline="0",r.style.border="0",r.style.margin="0",r.style.padding="0";var i=document.createElement("div");if(i.style.position="absolute",i.style.outline="0",i.style.margin="0",i.style.padding="0",i.style.border="0",i.style.fontSize=t.fontSize,i.style.fontFamily=t.fontFamily,i.style.color=t.color,i.style.backgroundColor=t.backgroundColor,i.style.top="0",i.style.left="0",i.style.overflow="hidden",i.innerHTML=t.promptInnerHTML,i.style.background="transparent",void 0===document.body)throw"document.body is undefined. The library was wired up incorrectly.";document.body.appendChild(i);var a=i.getBoundingClientRect().right;r.appendChild(i),i.style.visibility="visible",i.style.left="-"+a+"px",r.style.marginLeft=a+"px",r.appendChild(l),r.appendChild(n);var s=document.createElement("div");s.style.position="absolute",s.style.visibility="hidden",s.style.outline="0",s.style.margin="0",s.style.padding="0",s.style.textAlign="left",s.style.fontSize=t.fontSize,s.style.fontFamily=t.fontFamily,s.style.backgroundColor=t.backgroundColor,s.style.zIndex=t.dropDownZIndex,s.style.cursor="default",s.style.borderStyle="solid",s.style.borderWidth="1px",s.style.borderColor=t.dropDownBorderColor,s.style.overflowX="hidden",s.style.whiteSpace="pre",s.style.overflowY="scroll";var d=function(e){var o=[],r=0,i=-1,a=function(){this.style.outline="1px solid #ddd"},s=function(){this.style.outline="0"},d=function(){u.hide(),u.onmouseselection(this.__hint)},u={hide:function(){e.style.visibility="hidden"},refresh:function(n,l){e.style.visibility="hidden",r=0,e.innerHTML="";var i=window.innerHeight||document.documentElement.clientHeight,y=e.parentNode.getBoundingClientRect(),c=y.top-6,p=i-y.bottom-6;o=[];for(var v=0;v<l.length;v++)if(t.matcher(n,l[v])){var h=document.createElement("div");h.style.color=t.color,h.onmouseover=a,h.onmouseout=s,h.onmousedown=d,h.__hint=l[v],h.innerHTML=n+"<b>"+l[v].substring(n.length)+"</b>",o.push(h),e.appendChild(h)}0!==o.length&&(1!==o.length||n!==o[0].__hint)&&(o.length<2||(u.highlight(0),c>3*p?(e.style.maxHeight=c+"px",e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom="",e.style.maxHeight=p+"px"),e.style.visibility="visible"))},highlight:function(e){-1!=i&&o[i]&&(o[i].style.backgroundColor=t.backgroundColor),o[e].style.backgroundColor=t.dropDownOnHoverBackgroundColor,i=e},move:function(t){return"hidden"===e.style.visibility?"":r+t===-1||r+t===o.length?o[r].__hint:(r+=t,u.highlight(r),o[r].__hint)},onmouseselection:function(e){n.value=l.value=c+e,v.onChange(n.value),p=n.value,setTimeout(function(){n.focus()},0)}};return u},u=d(s);r.appendChild(s),e.appendChild(r);var y,c,p,v={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){v.repaint()},startFrom:0,options:[],wrapper:r,input:n,hint:l,dropDown:s,prompt:i,setText:function(e){l.value=e,n.value=e},getText:function(){return n.value},hideDropDown:function(){u.hide()},repaint:function(){var e=n.value,r=v.startFrom,i=v.options,a=i.length,d=e.substring(r);c=e.substring(0,r),l.value="";for(var y=0;a>y;y++){var p=i[y];if(t.matcher(d,p)){l.realValue=p,l.value=c+d+p.substring(d.length);break}}s.style.left=o(c)+"px",u.refresh(d,v.options)}},h=function(e,t){p=e.value;var o=function(){var o=e.value;p!==o&&(p=o,t(o))};e.addEventListener?(e.addEventListener("input",o,!1),e.addEventListener("keyup",o,!1),e.addEventListener("change",o,!1)):(e.attachEvent("oninput",o),e.attachEvent("onkeyup",o),e.attachEvent("onchange",o))};h(n,v.onChange);var f=function(e){e=e||window.event;var t=e.keyCode;if(33!=t&&34!=t){if(27==t||17==t)return u.hide(),l.value=n.value,void n.focus();if(39!=t&&35!=t&&9!=t)if(13!=t){if(40==t){var o=u.move(1);return""==o&&v.onArrowDown(),void(l.value=c+o)}if(38==t){var o=u.move(-1);return""==o&&v.onArrowUp(),l.value=c+o,e.preventDefault(),void e.stopPropagation()}l.value=""}else if(0==l.value.length)v.onEnter();else{var r="hidden"==s.style.visibility;if(u.hide(),r)return l.value=n.value,n.focus(),void v.onEnter();l.value=n.value=l.realValue;var i=p!=n.value;p=n.value,i&&v.onChange(n.value)}else if(9==t&&(l.value===n.value||0===l.value.length?(l.value=n.value=l.realValue,v.onTab()):(e.preventDefault(),e.stopPropagation())),l.value.length>0){u.hide(),l.value=n.value=l.realValue;var i=p!=n.value;p=n.value,i&&v.onChange(n.value)}}};return n.onkeydown=f,n.onfocus=function(){u.refresh(token,v.options)},n.onblur=function(){u.hide(),""!==l.realValue&&(l.value=n.value=l.realValue)},v}